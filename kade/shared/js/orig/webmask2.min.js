$(document).ready(function(){
	// campos requiridos
	$(".required").each(function(K,V){
		var elementId = $(this).attr("id");
		var obj = $(V);
		var prev = obj.prev();
		var next = obj.next();
		var tag = null;
		
		tag = $("label[for='"+elementId+"']");			
			
		var itext = tag.text();
		itext = System.trim(itext);
		var len = itext.length; 
		
		// removendo ":"
		if(itext.lastIndexOf(":") == (len-1)){
			itext = itext.substr(0,len-1);
		}
		
		// adicionando asterisco vermelho
		itext += "<span style=\"color:#f00\">*</span>:";
		
		// colocando negrito
		//tag.css("fontWeight","bold");
		
		// setando texto novamente
		tag.html(itext);
	});
	
	// mascaras
	$('.mask\\.date').mask('11/11/1111').attr("placeholder","__/__/____");
	$('.mask\\.date2').mask('11.11.1111').attr("placeholder","__.__.____");
	$('.mask\\.time').mask('00:00:00').attr("placeholder","__:__:__");
	$('.mask\\.time2').mask('00:00').attr("placeholder","__:__");
	$('.mask\\.datetime').mask('99/99/9999 00:00:00').attr("placeholder","__/__/____ __:__:__");
	$('.mask\\.datetime2').mask('99/99/9999 00:00').attr("placeholder","__/__/____ __:__");
	$('.mask\\.cep').mask('99999-999').attr("placeholder","____-____");
	$('.mask\\.phone').mask('9999-9999').attr("placeholder","____-____");
	$('.mask\\.phone_with_ddd').mask('(99) 9999-9999').attr("placeholder","(__) ____-____");
	$('.mask\\.cpf').mask('999.999.999-99', {reverse: true}).attr("placeholder","___.___.___-__");
	$('.mask\\.cnpj').mask('99.999.999/9999-99', {reverse: true}).attr("placeholder","__.___.___/____-__");
	$('.mask\\.money').mask('000.000.000.000.000,00', {reverse: true});
	
	$(".mask\\.real").maskMoney({thousands:'', decimal:'.', allowZero:false, precision: 2});
	$(".mask\\.real3").maskMoney({thousands:'', decimal:'.', allowZero:false, precision: 3});
	//$('.mask\\.real').mask('0000000.00', {reverse: true});
	//$('.mask\\.real').blur(function(){
	//	if($(this).val() == ''){
	//		$(this).val("0.00");
	//	}
	//});
	
	$(".mask\\.money2").maskMoney({thousands:'.', decimal:',', allowZero:false, precision: 2});
	$(".mask\\.percent").maskMoney({thousands:'', decimal:'.', allowZero:false, precision: 2});
	$(".mask\\.percent2").maskMoney({thousands:'', decimal:'.', allowZero:false, precision: 2,suffix:" %"});
	
	// mascara para números
	$('.mask\\.numeric,.mask\\.int,.mask\\.integer').on("keypress",function(evt){
		var charCode = (evt.which) ? evt.which : event.keyCode
		if (charCode > 31 && (charCode < 48 || charCode > 57)){
			return false;
		}
		return true;
	});
	
	// mascara para letras e números
	$('.mask\\.alphanumeric').on("keypress",function(evt){
		var pattern = /[a-zA-Z0-9\s-_+]/g;
		var charCode = (evt.which) ? evt.which : event.keyCode
		var myChar = String.fromCharCode(charCode);
		return pattern.test(myChar);
	});
	
	// mascara para letras
	$('.mask\\.alpha').on("keypress",function(evt){
		var pattern = /[a-zA-Z\s-_+]/g;
		var charCode = (evt.which) ? evt.which : event.keyCode
		var myChar = String.fromCharCode(charCode);
		return pattern.test(myChar);
	});
	
	// mascara dinâmica para telefones com ou sem nono dígito
	$('.mask\\.phone2_with_ddd').on("keypress",function(evt){
		var charCode = (evt.which) ? evt.which : evt.keyCode;
		if (charCode > 31 && (charCode < 48 || charCode > 57)){
			return false;
		}
		return true;
	}).attr("placeholder","(__) ____-____");
	
	$('.mask\\.phone2_with_ddd').on("keyup",function(){
		var self = $(this);
		var maxlength = 11;
		var maxlengthFormatted = 15;
		var data = self.val();
			
		// garantindo tamanho fixo
		if(parseInt(self.attr("maxlength")) != maxlengthFormatted){
			self.attr("maxlength",maxlengthFormatted);
		}
		
		// somente números
		data = data.replace(/\D/g, '');
		
		// cortando dados
		if(data.length > maxlength){
			data = data.substr(0,maxlength);
			self.val(data);
			return;
		}
		
		// formatando novamente
		if(data.length == 11){
			data = data.replace(/^([0-9]{2})([0-9]{5})([0-9]{4})([0-9]{1,})/,"($1) $2-$3");
			data = data.replace(/^([0-9]{2})([0-9]{5})([0-9]{4})/,"($1) $2-$3");
		}else{
			data = data.replace(/^([0-9]{2})([0-9]{4})([0-9]{4})/,"($1) $2-$3");
			data = data.replace(/^([0-9]{2})([0-9]{4})([0-9]{1,3})/,"($1) $2-$3");
			data = data.replace(/^([0-9]{2})([0-9]{4})/,"($1) $2");
			data = data.replace(/^([0-9]{2})([0-9]{1,3})/,"($1) $2");
			data = data.replace(/^([0-9]{1,2})/,"($1");
		}
		
		self.val(data);
	}).keyup();
		
	// definindo tamanho
	$(".mask\\.cnpj").css("width","148px");
	$(".mask\\.date").css("width","65px");
	$(".mask\\.phone_with_ddd").css("width","110px");
	$(".mask\\.phone2_with_ddd").css("width","110px");
	$(".mask\\.cep").css("width","86px");
	$(".mask\\.real,.mask\\.real3").css("text-align","right").css("padding-right","2px");
});